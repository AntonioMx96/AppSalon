{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","document","addEventListener","iniciarApp","mostarServicios","mostrarSecccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","querySelectorAll","forEach","enlace","e","preventDefault","parseInt","target","dataset","paso","seccionAnterior","querySelector","classList","remove","add","tabAnterior","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","appendChild","onclick","seleccionarServicio","error","elemento","tagName","parentElement","contains","eliminarServicio","servicioObj","firstElementChild","nextElementSibling","agregarServicio","filter","siguiente","anterior","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","headingCita","innerHTML","serviciosCita","headingServicios","total","contenedorServicio","textoServicio","precioText","nombreTexto","value","trim","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","fechaAhora","fechaDehabilitar","getFullYear","getMonth","getDate","min","horaInput","split"],"mappings":"AAAA,IAAAA,OAAA,EACA,MAAAC,KAAA,CACAC,OAAA,GACAC,MAAA,GACAC,KAAA,GACAC,UAAA,IAGAC,SAAAC,iBAAA,mBAAA,KACAC,eAGA,MAAAA,WAAA,KACAC,kBAGAC,kBAEAC,iBAGAC,kBACAC,iBAGAC,mBAGAC,gBAGAC,aAGAC,YAGAC,4BAGAC,YAGAR,eAAA,KACAL,SAAAc,iBAAA,gBACAC,QAAAC,IACAA,EAAAf,iBAAA,QAAAgB,IACAA,EAAAC,iBACAxB,OAAAyB,SAAAF,EAAAG,OAAAC,QAAAC,MACAlB,kBACAI,wBAKAJ,gBAAA,KAEA,MAAAmB,EAAAvB,SAAAwB,cAAA,oBACAD,GACAA,EAAAE,UAAAC,OAAA,mBAGA1B,SAAAwB,cAAA,SAAA9B,QACA+B,UAAAE,IAAA,mBAGA,MAAAC,EAAA5B,SAAAwB,cAAA,iBACAI,GACAA,EAAAH,UAAAC,OAAA,UAKA1B,SAAAwB,cAAA,eAAA9B,YACA+B,UAAAE,IAAA,WAGAxB,gBAAA0B,UACA,IACA,MAAAC,QAAAC,MAAA,oBACAC,QAAAF,EAAAG,OACAD,EAAAjC,UAGAgB,QAAAmB,IACA,MAAAC,GAAAA,EAAAvC,OAAAA,EAAAwC,OAAAA,GAAAF,EAIAG,EAAArC,SAAAsC,cAAA,KACAD,EAAAE,YAAA3C,EACAyC,EAAAZ,UAAAE,IAAA,mBAGA,MAAAa,EAAAxC,SAAAsC,cAAA,KACAE,EAAAD,YAAA,GAAAH,EACAI,EAAAf,UAAAE,IAAA,mBAIA,MAAAc,EAAAzC,SAAAsC,cAAA,OACAG,EAAAhB,UAAAE,IAAA,YACAc,EAAApB,QAAAqB,WAAAP,EAGAM,EAAAE,YAAAN,GACAI,EAAAE,YAAAH,GAGAC,EAAAG,QAAAC,oBAEA7C,SAAAwB,cAAA,cAAAmB,YAAAF,KAEA,MAAAK,MAKAD,oBAAA5B,IACA,IAAA8B,EAOA,GALAA,EADA,MAAA9B,EAAAG,OAAA4B,QACA/B,EAAAG,OAAA6B,cAEAhC,EAAAG,OAGA2B,EAAAtB,UAAAyB,SAAA,gBAAA,CACAH,EAAAtB,UAAAC,OAAA,gBAEA,MAAAS,EAAAhB,SAAA4B,EAAA1B,QAAAqB,YACAS,iBAAAhB,OACA,CACAY,EAAAtB,UAAAE,IAAA,gBACA,MAAAyB,EAAA,CACAjB,GAAAhB,SAAA4B,EAAA1B,QAAAqB,YACA9C,OAAAmD,EAAAM,kBAAAd,YACAH,OAAAjB,SAAA4B,EAAAM,kBAAAC,mBAAAf,cAEAgB,gBAAAH,KAMAD,iBAAAhB,IACA,MAAApC,UAAAA,GAAAJ,KACAA,KAAAI,UAAAA,EAAAyD,OAAAtB,GAAAA,EAAAC,KAAAA,IAIAoB,gBAAAH,IAEA,MAAArD,UAAAA,GAAAJ,KACAA,KAAAI,UAAA,IAAAA,EAAAqD,IAIA9C,gBAAA,KACAN,SAAAwB,cAAA,cACAvB,iBAAA,QAAAgB,IACAvB,SAEAc,sBAIAD,eAAA,KACAP,SAAAwB,cAAA,aACAvB,iBAAA,QAAAgB,IACAvB,SAEAc,sBAIAA,iBAAA,KACA,MAAAiD,EAAAzD,SAAAwB,cAAA,cACAkC,EAAA1D,SAAAwB,cAAA,aAEA,IAAA9B,OACAgE,EAAAjC,UAAAE,IAAA,WACA,IAAAjC,QACA+D,EAAAhC,UAAAE,IAAA,WAEAlB,kBAEAiD,EAAAjC,UAAAC,OAAA,WACA+B,EAAAhC,UAAAC,OAAA,YAEAtB,mBAGAK,cAAA,KAEA,MAAAb,OAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAAC,UAAAA,GAAAJ,KAGAgE,EAAA3D,SAAAwB,cAAA,sBAGA,KAAAmC,EAAAC,YACAD,EAAAE,YAAAF,EAAAC,YAIA,GAAAE,OAAAC,OAAApE,MAAAqE,SAAA,IAAA,CACA,MAAAC,EAAAjE,SAAAsC,cAAA,KAMA,OALA2B,EAAA1B,YAAA,kDACA0B,EAAAxC,UAAAE,IAAA,uBAGAgC,EAAAhB,YAAAsB,GAIA,MAAAC,EAAAlE,SAAAsC,cAAA,MACA4B,EAAA3B,YAAA,kBAEA,MAAA7B,EAAAV,SAAAsC,cAAA,KACA5B,EAAAyD,UAAA,wBAAAvE,EAEA,MAAAe,EAAAX,SAAAsC,cAAA,KACA3B,EAAAwD,UAAA,uBAAAtE,EAEA,MAAAgB,EAAAb,SAAAsC,cAAA,KACAzB,EAAAsD,UAAA,sBAAArE,EAEA,MAAAsE,EAAApE,SAAAsC,cAAA,OACA8B,EAAA3C,UAAAE,IAAA,qBAEA,MAAA0C,EAAArE,SAAAsC,cAAA,MACA+B,EAAA9B,YAAA,uBACA6B,EAAAzB,YAAA0B,GAEA,IAAAC,EAAA,EAGAvE,EAAAgB,QAAAmB,IACA,MAAAtC,OAAAA,EAAAwC,OAAAA,GAAAF,EACAqC,EAAAvE,SAAAsC,cAAA,OACAiC,EAAA9C,UAAAE,IAAA,uBAEA,MAAA6C,EAAAxE,SAAAsC,cAAA,KACAkC,EAAAjC,YAAA3C,EAEA,MAAA4C,EAAAxC,SAAAsC,cAAA,KACAE,EAAAD,YAAA,IAAAH,EACAI,EAAAf,UAAAE,IAAA,UAGA4C,EAAA5B,YAAA6B,GACAD,EAAA5B,YAAAH,GAEA4B,EAAAzB,YAAA4B,GACAD,GAAAlC,IAGA,MAAAqC,EAAAzE,SAAAsC,cAAA,KACAmC,EAAAN,UAAA,yBAAAG,EAEAX,EAAAhB,YAAAuB,GACAP,EAAAhB,YAAAjC,GACAiD,EAAAhB,YAAAhC,GACAgD,EAAAhB,YAAA9B,GACA8C,EAAAhB,YAAAyB,GACAT,EAAAhB,YAAA8B,IAQA/D,WAAA,KACAV,SAAAwB,cAAA,WACAvB,iBAAA,QAAAgB,IACA,MAAAyD,EAAAzD,EAAAG,OAAAuD,MAAAC,OAGA,GAAA,KAAAF,GAAAA,EAAAG,OAAA,EACAC,cAAA,YAAA,aACA,CACA,MAAAC,EAAA/E,SAAAwB,cAAA,WACAuD,GACAA,EAAArD,SAEA/B,KAAAC,OAAA8E,MAKAI,cAAA,CAAAE,EAAAC,KAIA,GAFAjF,SAAAwB,cAAA,WAGA,OAEA,MAAAuD,EAAA/E,SAAAsC,cAAA,OACAyC,EAAAxC,YAAAyC,EACAD,EAAAtD,UAAAE,IAAA,UAEA,UAAAsD,GACAF,EAAAtD,UAAAE,IAAA,SAGA3B,SAAAwB,cAAA,eAEAmB,YAAAoC,GAGAG,WAAA,KACAH,EAAArD,UACA,MAGAf,UAAA,KACA,MAAAwE,EAAAnF,SAAAwB,cAAA,UAEA2D,EAAAlF,iBAAA,QAAAgB,IACA,MAAAmE,EAAA,IAAAC,KAAApE,EAAAG,OAAAuD,OAAAW,YAEA,CAAA,GAAAtB,SAAAoB,IACAnE,EAAAC,iBACAiE,EAAAR,MAAA,GACAG,cAAA,6BAAA,UAEAnF,KAAAE,MAAAsF,EAAAR,SAMA/D,0BAAA,KACA,MAAAuE,EAAAnF,SAAAwB,cAAA,UACA+D,EAAA,IAAAF,KAMAG,EAAA,GAHAD,EAAAE,iBACAF,EAAAG,WAAA,KACAH,EAAAI,UAAA,IAEAR,EAAAS,IAAAJ,GAGA3E,SAAA,KACA,MAAAgF,EAAA7F,SAAAwB,cAAA,SAEAqE,EAAA5F,iBAAA,QAAAgB,IACA,MAAAJ,EAAAI,EAAAG,OAAAuD,MACA7E,EAAAe,EAAAiF,MAAA,KAEA,GAAAhG,EAAA,GAAA,IAAAA,EAAA,GAAA,GAGA,OAFAgF,cAAA,yBAAA,cACAe,EAAAlB,MAAA,IAGAhF,KAAAG,KAAAe","file":"bundle.js","sourcesContent":["let pagina = 1;\nconst cita = {\n    nombre: '',\n    fecha: '',\n    hora: '',\n    servicios: []\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    iniciarApp();\n});\n\nconst iniciarApp = () => {\n    mostarServicios();\n\n    // Resaltar del Div Actual segun el tab al que se presiona\n    mostrarSecccion()\n    //ocula o muestra una seccion segun el tab al que se presiona\n    cambiarSeccion();\n\n    //paginacion\n    paginaSiguiente();\n    paginaAnterior();\n\n    //comprueba la pagina actual para ocultar o mostrar paginacion\n    botonesPaginador()\n\n    //muestra el mensaje de la cita o mensaje de error en caso de no pasar la validacion\n    mostarResumen()\n\n    //almacena el nombre\n    nombreCita()\n\n    //almacena la fecha\n    fechaCita()\n\n    //deshabilita dias pasados\n    deshabilitarFechaAnterior()\n\n    //almacena la hora de la cita en el objeto\n    horaCita()\n}\n\nconst cambiarSeccion = () => {\n    const enlaces = document.querySelectorAll('.tabs button')\n    enlaces.forEach(enlace => {\n        enlace.addEventListener('click', e => {\n            e.preventDefault()\n            pagina = parseInt(e.target.dataset.paso)\n            mostrarSecccion()\n            botonesPaginador()\n        })\n    })\n}\n\nconst mostrarSecccion = () => {\n    //elimina mover secciond de la seccion anterior\n    const seccionAnterior = document.querySelector('.mostrar-seccion')\n    if (seccionAnterior) {\n        seccionAnterior.classList.remove('mostrar-seccion')\n    }\n\n    const seccionActual = document.querySelector(`#paso-${pagina}`)\n    seccionActual.classList.add('mostrar-seccion')\n\n    //elimina la clase actual del anterior\n    const tabAnterior = document.querySelector('.tabs .actual')\n    if (tabAnterior) {\n        tabAnterior.classList.remove('actual')\n    }\n    //document.querySelector('.tabs .actual').classList.remove('actual')\n\n    //Resalta tap actual\n    const tab = document.querySelector(`[data-paso=\"${pagina}\"]`)\n    tab.classList.add('actual')\n}\n\nconst mostarServicios = async () => {\n    try {\n        const resultado = await fetch('./servicios.json')\n        const db = await resultado.json()\n        const servicios = db.servicios\n\n        //generar html\n        servicios.forEach(servicio => {\n            const { id, nombre, precio } = servicio\n\n            //dom scripting\n            //generar nombre del servicio\n            const nombreServicio = document.createElement('p')\n            nombreServicio.textContent = nombre\n            nombreServicio.classList.add('nombre-servicio')\n\n            //generar precio del servicio\n            const precioServicio = document.createElement('p')\n            precioServicio.textContent = `${precio}`\n            precioServicio.classList.add('precio-servicio')\n\n            //generar contener de servicio\n\n            const servicioDiv = document.createElement('div')\n            servicioDiv.classList.add('servicio')\n            servicioDiv.dataset.idServicio = id\n\n            //intectar \n            servicioDiv.appendChild(nombreServicio)\n            servicioDiv.appendChild(precioServicio)\n\n            //seleciona un servicio para la cita\n            servicioDiv.onclick = seleccionarServicio\n\n            document.querySelector('#servicios').appendChild(servicioDiv)\n        })\n    } catch (error) {\n        //console.log(error)\n    }\n}\n\nconst seleccionarServicio = e => {\n    let elemento;\n    if (e.target.tagName === 'P') {\n        elemento = e.target.parentElement\n    } else {\n        elemento = e.target\n    }\n\n    if (elemento.classList.contains('seleccionado')) {\n        elemento.classList.remove('seleccionado')\n\n        const id = parseInt(elemento.dataset.idServicio)\n        eliminarServicio(id)\n    } else {\n        elemento.classList.add('seleccionado')\n        const servicioObj = {\n            id: parseInt(elemento.dataset.idServicio),\n            nombre: elemento.firstElementChild.textContent,\n            precio: parseInt(elemento.firstElementChild.nextElementSibling.textContent)\n        }\n        agregarServicio(servicioObj)\n\n        // console.log(servicioObj)\n    }\n}\n\nconst eliminarServicio = (id) => {\n    const { servicios } = cita\n    cita.servicios = servicios.filter(servicio => servicio.id !== id)\n    //console.log(cita)\n}\n\nconst agregarServicio = (servicioObj) => {\n\n    const { servicios } = cita\n    cita.servicios = [...servicios, servicioObj]\n  //  console.log(cita)\n}\n\nconst paginaSiguiente = () => {\n    const siguiente = document.querySelector('#siguiente')\n    siguiente.addEventListener('click', e => {\n        pagina++;\n       // console.log(pagina)\n        botonesPaginador()\n    })\n}\n\nconst paginaAnterior = () => {\n    const anterior = document.querySelector('#anterior')\n    anterior.addEventListener('click', e => {\n        pagina--;\n       // console.log(pagina)\n        botonesPaginador()\n    })\n}\n\nconst botonesPaginador = () => {\n    const siguiente = document.querySelector('#siguiente')\n    const anterior = document.querySelector('#anterior')\n\n    if (pagina === 1) {\n        anterior.classList.add('ocultar')\n    } else if (pagina === 3) {\n        siguiente.classList.add('ocultar')\n        //anterior.classList.add('ocultar')\n        mostarResumen()\n    } else {\n        anterior.classList.remove('ocultar')\n        siguiente.classList.remove('ocultar')\n    }\n    mostrarSecccion()\n}\n\nconst mostarResumen = () => {\n    //destructuring\n    const { nombre, fecha, hora, servicios } = cita\n\n    //seleccionar Resumen\n    const resumenDiv = document.querySelector('.contenido-resumen')\n\n    //limpiar el html previo\n    while (resumenDiv.firstChild) {\n        resumenDiv.removeChild(resumenDiv.firstChild)\n    }\n\n    //validacion de objeto\n    if (Object.values(cita).includes('')) {\n        const noServicios = document.createElement('P')\n        noServicios.textContent = \"Faltan datos de servicios, Fecha, Hora o Nombre\"\n        noServicios.classList.add('invalidar-cita')\n\n        //agregar a resumen div\n        resumenDiv.appendChild(noServicios);\n        return\n    }\n\n    const headingCita = document.createElement('h3')\n    headingCita.textContent = 'Resumen de Cita'\n\n    const nombreCita = document.createElement('p')\n    nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`\n\n    const fechaCita = document.createElement('p')\n    fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`\n\n    const horaCita = document.createElement('p')\n    horaCita.innerHTML = `<span>Hora:</span> ${hora}`\n\n    const serviciosCita = document.createElement('div')\n    serviciosCita.classList.add('resumen-servicios')\n\n    const headingServicios = document.createElement('h3')\n    headingServicios.textContent = 'Resumen de Servicios'\n    serviciosCita.appendChild(headingServicios)\n\n    let total = 0\n\n    //iterar sobre el arreglo de servicios\n    servicios.forEach(servicio => {\n        const { nombre, precio } = servicio\n        const contenedorServicio = document.createElement('div')\n        contenedorServicio.classList.add('contenedor-servicio')\n\n        const textoServicio = document.createElement('p')\n        textoServicio.textContent = nombre\n\n        const precioServicio = document.createElement('p')\n        precioServicio.textContent = '$' + precio\n        precioServicio.classList.add('precio')\n\n        //agregar nombre y precio del servicio\n        contenedorServicio.appendChild(textoServicio)\n        contenedorServicio.appendChild(precioServicio)\n\n        serviciosCita.appendChild(contenedorServicio)\n        total += precio\n    })\n\n    const precioText = document.createElement('p')\n    precioText.innerHTML = `<span>Total:</span> $ ${total}`\n\n    resumenDiv.appendChild(headingCita)\n    resumenDiv.appendChild(nombreCita)\n    resumenDiv.appendChild(fechaCita)\n    resumenDiv.appendChild(horaCita)\n    resumenDiv.appendChild(serviciosCita)\n    resumenDiv.appendChild(precioText)\n\n\n\n\n    //console.log(nombreCita)\n}\n\nconst nombreCita = () => {\n    const nombreInput = document.querySelector('#nombre')\n    nombreInput.addEventListener('input', e => {\n        const nombreTexto = e.target.value.trim()\n\n        //validacion del nombre\n        if (nombreTexto === '' || nombreTexto.length < 3) {\n            mostrarAlerta('no valido', 'error')\n        } else {\n            const alerta = document.querySelector('.alerta')\n            if (alerta) {\n                alerta.remove()\n            }\n            cita.nombre = nombreTexto\n        }\n    })\n}\n\nconst mostrarAlerta = (mensaje, tipo) => {\n    //si hay una alerta previa no crear otra\n    const alertaPrevia = document.querySelector('.alerta')\n\n    if (alertaPrevia) {\n        return;\n    }\n    const alerta = document.createElement('div')\n    alerta.textContent = mensaje\n    alerta.classList.add('alerta')\n\n    if (tipo === 'error') {\n        alerta.classList.add('error')\n    }\n\n    const formulario = document.querySelector('.formulario')\n\n    formulario.appendChild(alerta)\n\n    //eliminar alerta despues de 3 segundos\n    setTimeout(() => {\n        alerta.remove()\n    }, 3000)\n}\n\nconst fechaCita = () => {\n    const fechaInput = document.querySelector('#fecha')\n\n    fechaInput.addEventListener('input', e => {\n        const dia = new Date(e.target.value).getUTCDay()\n        //console.log(dia.toLocaleDateString('es-Es'))\n        if ([0].includes(dia)) {\n            e.preventDefault()\n            fechaInput.value = ''\n            mostrarAlerta('Fines de semana no validos', 'error')\n        } else {\n            cita.fecha = fechaInput.value\n        }\n\n    })\n}\n\nconst deshabilitarFechaAnterior = () => {\n    const fechaInput = document.querySelector('#fecha')\n    const fechaAhora = new Date()\n\n    //formato deseado AAAA-MM-DD\n    const year = fechaAhora.getFullYear()\n    const month = fechaAhora.getMonth() + 1\n    const day = fechaAhora.getDate() + 1\n    const fechaDehabilitar = `${year}-${month}-${day}`\n    fechaInput.min = fechaDehabilitar\n}\n\nconst horaCita = () => {\n    const horaInput = document.querySelector('#hora')\n\n    horaInput.addEventListener('input', e => {\n        const horaCita = e.target.value\n        const hora = horaCita.split(':')\n\n        if (hora[0] < 10 || hora[0] > 18) {\n            mostrarAlerta('Hora fuera de servicio', 'error')\n            horaInput.value = ''\n            return;\n        }\n        cita.hora = horaCita\n    })\n}"]}